/*! nv-chart v0.0.0 | 2014-05-01 */
!function(a,b){"use strict";var c=angular.module("nvChart",[]);Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});var d=function(a,c,d){var e=this,f={chartType:null,data:[],color:[],margin:{},width:null,height:null,showLegend:!0,noData:null,tooltips:!0,tooltipContent:null,useInteractiveGuideline:!1,transitionDuration:null,showXAxis:!0,xValue:null,xShowMaxMin:!0,xAxisLabel:null,xAxisTickFormat:null,x2AxisLabel:null,x2AxisTickFormat:null,showYAxis:!0,yValue:null,yShowMaxMin:!0,yAxisLabel:null,yAxisTickFormat:null,rightAlignYAxis:!1,y1AxisLabel:null,y1AxisTickFormat:null,y2AxisLabel:null,y2AxisTickFormat:null,y3AxisLabel:null,y3AxisTickFormat:null,y4AxisLabel:null,y4AxisTickFormat:null,showLabels:!0,labelThreshold:.5,labelType:"key",donut:!1,donutRatio:0,staggerLabels:!1,showValues:!1,showDistX:!1,showDistY:!1,onlyCircles:!1};e.data=[],e.models=[],e.config=b.extend(f,d),e.updateConfig=function(a){e.config=b.extend(e.config,a),"object"==typeof e.config.data&&(e.data=e.config.data)},e.updateModels=function(){angular.forEach(e.models,function(a){a.update()})},e.setChartType=function(a){"string"==typeof a&&(e.model=nv.models[a])},e.configAxis=function(a){"function"==typeof e.config.xValue&&a.x(e.config.xValue),"function"==typeof e.config.yValue&&a.y(e.config.yValue),a.xAxis&&a.xAxis.showMaxMin&&a.xAxis.showMaxMin(!!e.config.xShowMaxMin),a.yAxis&&a.yAxis.showMaxMin&&a.yAxis.showMaxMin(!!e.config.yShowMaxMin);var b=["xAxis","x2Axis","yAxis","y1Axis","y2Axis","y3Axis","y4Axis"];angular.forEach(b,function(b){e.setAxisLabel(a,b),e.setTickFormat(a,b)})},e.setAxisLabel=function(a,b){var c=e.config[b+"Label"];a[b]&&a[b].axisLabel&&"string"==typeof c&&a[b].axisLabel(c)},e.setTickFormat=function(a,b){var c=e.config[b+"TickFormat"];a[b]&&a[b].tickFormat&&"string"==typeof c?a[b].tickFormat(d3.format(c)):a[b]&&a[b].tickFormat&&"function"==typeof c&&a[b].tickFormat(c)},e.render=function(){if(e.setChartType(e.config.chartType),e.model){var a=e.model();a.margin&&null!==e.config.margin&&"object"==typeof e.config.margin&&a.margin(e.config.margin),a.color&&b.isArray(e.config.color)&&e.config.color.length&&a.color(e.config.color),a.width&&"number"==typeof e.config.width&&a.width(e.config.width),a.height&&"number"==typeof e.config.height&&a.height(e.config.height),a.rightAlignYAxis&&a.rightAlignYAxis(!!e.config.rightAlignYAxis),a.showLegend&&a.showLegend(!!e.config.showLegend),"string"==typeof e.config.noData&&a.noData(e.config.noData),a.useInteractiveGuideline&&a.useInteractiveGuideline(!!e.config.useInteractiveGuideline),a.staggerLabels&&a.staggerLabels(!!e.config.staggerLabels),a.tooltips&&a.tooltips(!!e.config.tooltips),"string"==typeof e.config.tooltipContent&&a.tooltipContent(e.config.tooltipContent),a.showValues&&a.showValues(!!e.config.showValues),a.showLabels&&a.showLabels(!!e.config.showLabels),a.labelThreshold&&a.labelThreshold(e.config.labelThreshold),a.labelType&&a.labelType(e.config.labelType),a.donut&&a.donut(!!e.config.donut),a.donutRatio&&a.donutRatio(e.config.donutRatio),a.showDistX&&a.showDistX(!!e.config.showDistX),a.showDistY&&a.showDistY(!!e.config.showDistY),a.scatter&&a.scatter.onlyCircles&&a.scatter.onlyCircles(!!e.config.onlyCircles),e.configAxis(a),c.empty();var d=d3.select(c[0]).append("svg").datum(e.data);"number"==typeof e.config.transitionDuration&&(d=d.transition().duration(e.config.transitionDuration)),d.call(a),e.models.push(a),nv.utils.windowResize(a.update)}}};c.controller("d3Controller",["$scope",function(){}]),c.directive("nvChartContainer",[function(){}]),c.directive("nvChart",[function(){var a={scope:!0,link:function(a,c,e){var f=a.$parent,g=b(c),h=new d(a,g),i=[];a.$watch(e.nvChart,function(){var a=f.$eval(e.nvChart);a?j(a):k()});var j=function(c){c.$chartScope=a,c.$chartScope.refresh=function(){h.updateConfig(c),h.render()};var d=function(a){h.config.chartType!==a&&c.$chartScope.refresh()};if(i.push(f.$watch(e.nvChart+".chartType",d)),"string"==typeof c.data){var g=function(a){h.data=a?b.extend([],a):[],h.render()};i.push(f.$watch(c.data,g)),i.push(f.$watch(c.data+".length",function(){g(f.$eval(c.data))}))}c.$chartScope.$on("$destroy",function(){k(),c.$chartScope=null})},k=function(){angular.forEach(i,function(a){a()}),i=[],h.data=[],h.render()}}};return a}]),c.directive("nvLegend",[function(){}])}(window,jQuery);