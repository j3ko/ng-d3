/*! ng-d3 v0.0.0 | 2014-04-21 */
!function(a,b){"use strict";var c=angular.module("ngD3.directives",[]);angular.module("ngD3",["ngD3.directives"]);var d=function(a,c,d){var e=this,f={chartType:"line",data:[],color:[],margin:{},showXAxis:!0,xValue:null,xAxisLabel:null,xAxisTickFormat:null,x2AxisLabel:null,x2AxisTickFormat:null,showYAxis:!0,yValue:null,yAxisLabel:null,yAxisTickFormat:null,y1AxisLabel:null,y1AxisTickFormat:null,y2AxisLabel:null,y2AxisTickFormat:null,y3AxisLabel:null,y3AxisTickFormat:null,y4AxisLabel:null,y4AxisTickFormat:null,showLabels:!0,labelThreshold:.5,labelType:"key",donut:!1,donutRatio:0,tooltips:!0,showValues:!1,staggerLabels:!1,useInteractiveGuideline:!1,transitionDuration:null};e.data=[],e.config=b.extend(f,c),e.updateConfig=function(a){e.config=b.extend(e.config,a)},e.setChartType=function(a){"string"==typeof a&&(e.model=nv.models[a])},e.configAxis=function(a){"function"==typeof e.config.xValue&&a.x(e.config.xValue),"function"==typeof e.config.yValue&&a.y(e.config.yValue),e.setAxisLabel(a,"xAxis",e.config.xAxisLabel),e.setAxisLabel(a,"x2Axis",e.config.x2AxisLabel),e.setAxisLabel(a,"yAxis",e.config.yAxisLabel),e.setAxisLabel(a,"y1Axis",e.config.yAxisLabel),e.setAxisLabel(a,"y2Axis",e.config.yAxisLabel),e.setAxisLabel(a,"y3Axis",e.config.yAxisLabel),e.setAxisLabel(a,"y4Axis",e.config.yAxisLabel),e.setTickFormat(a,"xAxis",e.config.xAxisTickFormat),e.setTickFormat(a,"x2Axis",e.config.x2AxisTickFormat),e.setTickFormat(a,"yAxis",e.config.yAxisTickFormat),e.setTickFormat(a,"y1Axis",e.config.y1AxisTickFormat),e.setTickFormat(a,"y2Axis",e.config.y2AxisTickFormat),e.setTickFormat(a,"y3Axis",e.config.y3AxisTickFormat),e.setTickFormat(a,"y4Axis",e.config.y4AxisTickFormat)},e.setAxisLabel=function(a,b,c){a[b]&&a[b].axisLabel&&"string"==typeof c&&a[b].axisLabel(c)},e.setTickFormat=function(a,b,c){a[b]&&a[b].tickFormat&&"string"==typeof c?a[b].tickFormat(d3.format(c)):a[b]&&a[b].tickFormat&&"string"==typeof c&&a[b].tickFormat(c)},e.render=function(){e.setChartType(e.config.chartType);var a=e.model();a.margin&&a.margin(e.config.margin),a.color&&a.color(e.config.color),a.useInteractiveGuideline&&a.useInteractiveGuideline(!!e.config.useInteractiveGuideline),a.staggerLabels&&a.staggerLabels(!!e.config.staggerLabels),a.tooltips&&a.tooltips(!!e.config.tooltips),a.showValues&&a.showValues(!!e.config.showValues),a.showLabels&&a.showLabels(!!e.config.showLabels),a.labelThreshold&&a.labelThreshold(e.config.labelThreshold),a.labelType&&a.labelType(e.config.labelType),a.donut&&a.donut(!!e.config.donut),a.donutRatio&&a.donutRatio(e.config.donutRatio),e.configAxis(a),d.empty();var b=d3.select(d[0]).append("svg").datum(e.data);"number"==typeof e.config.transitionDuration&&(b=b.transition().duration(e.config.transitionDuration)),b.call(a),nv.utils.windowResize(a.update)}};c.directive("ngD3",["$compile",function(){var a={scope:!0,compile:function(){return{pre:function(a,c,e){var f=a.$parent,g=b(c),h=f.$eval(e.ngD3),i=new d(a,h,g);if("string"==typeof e.ngD3){var j=function(){i.updateConfig(a.$eval(e.ngD3)),i.render()};f.$watch(e.ngD3,j,!0)}if(h&&"string"==typeof h.data){var k=function(a){i.data=b.extend([],a),i.render()};f.$watch(h.data,k),f.$watch(h.data+".length",function(){k(a.$eval(h.data))})}}}}};return a}])}(window,jQuery);